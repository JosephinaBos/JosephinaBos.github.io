<!doctype html>
<html>
<head>
  <meta charset="utf-8">

  <!-- Always force latest IE rendering engine or request Chrome Frame -->
  <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">

  <!-- For Bootstrap responsiveness -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
  <link rel="stylesheet" href=https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">

  <!-- Use title if it's in the page YAML frontmatter -->
  <title><%= current_page.data.title || "Josephina Bos - Web Developer" %></title>

  <meta name="description" content="Full Stack Web Developer">
  <meta name="keywords" content="josephina bos full stack web app development ruby on rails amsterdam">
  <meta name='url' content='www.josephinabos.io'>
  <meta http-equiv="language" content="EN">

  <meta name="google-site-verification" content="mRXjLjbg84O-wuKVm0tgXNaXppkJGq36S50bLgOcieQ" />

  <meta property="og:title"              content="Josephina Bos">
  <meta property="og:image"              content="http://josephinabos.io/images/thumb.jpg">
  <meta property="og:description"        content="Full Stack Web Developer">

  <meta property="twitter:title"         content="Josephina Bos">
  <meta property="twitter:image"         content="images/thumb.png">
  <meta property="twitter:description"   content="Full Stack Web Developer">

  <%= stylesheet_link_tag "all" %>
  <%= javascript_include_tag  "all" %>
  <%= favicon_tag 'images/favicon.png' %>

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- Leave those next 4 lines if you care about users using IE8 -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
      <![endif]-->
    </head>

    <body class="<%= page_classes %>">

      <%= partial "navbar" %>
      <%= yield %>

<h3>Your pin number is:</h3>
<h3 id="session-id"></h3>

<button id="cancel-session" style="display: none" onclick="sessionEnd()">Cancel Session</button>

<script>
  (function(s,u,r,f,l,y){s[f]=s[f]||{init:function(){s[f].q=arguments}};
  l=u.createElement(r);y=u.getElementsByTagName(r)[0];l.async=1;
  l.src='https://surfly.com/surfly.js';y.parentNode.insertBefore(l,y);})
  (window,document,'script','Surfly');

  var settings = {
    block_until_agent_joins: false,
    splash: false
  };

  Surfly.init({widget_key: '0c17c102b943457a82838fe64a5a0a0d'}, function(init) {
    if (init.success) {
      if(!Surfly.currentSession){
        Surfly.session(settings)
        .on('viewer_joined', function(session, event) {
        // if a viewer joins and they are the first then redirect to home page
          if(event.count == 1){
            session.relocate("https://example.com");
          }
        })
        .on('session_started', function(session, event) {
        // display the session-id
          var showId = document.getElementById("session-id");
          showId.style.display = "block";
          showId.textContent = session.pin;
        }).startLeader();
      }
      else {
        document.getElementById('cancel-session').style.display = "block";
      }
    }
  });

  function sessionEnd() {
    Surfly.currentSession.end();
  }
</script>
</body>
</html>
